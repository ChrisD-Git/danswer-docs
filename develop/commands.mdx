---
title: Useful commands
description: 'How to develop on Danswer'
---

## Contributing should be easy!

We want to make contributing to Danswer as seamless as possible, so we've included a list of common commands which you'll find yourself using quite often!

## Common Development Commands

Here are some useful commands for developing on Danswer. These commands help streamline various tasks in your development workflow.

### API and Server Commands

- Start the main API server:
  ```
  AUTH_TYPE=disabled uvicorn danswer.main:app --reload --port 8080
  ```
  This command launches the Danswer API server on port 8080 with authentication disabled and auto-reload enabled, allowing for quick testing and development.

- Run background jobs:
  ```
  python ./scripts/dev_run_background_jobs.py
  ```
  Executes necessary background tasks during development, ensuring all required processes are running.

- Start the model server:
  ```
  uvicorn model_server.main:app --reload --port 9000
  ```
  Launches the model server on port 9000 with auto-reload enabled, which is crucial for Danswer's AI capabilities.

### Docker Commands

- Build and start all Docker containers:
  ```
  docker compose -f ./deployment/docker_compose/docker-compose.dev.yml -p danswer-stack up -d --build --force-recreate
  ```
  This command sets up the entire Danswer stack in Docker, building and recreating all containers for a complete development environment.

- Start essential Docker containers:
  ```
  docker compose -f ./deployment/docker_compose/docker-compose.dev.yml -p danswer-stack up -d index relational_db
  ```
  Launches only the index and database containers, useful for lighter development tasks.

- Stop and remove Docker containers:
  ```
  docker compose -f ./deployment/docker_compose/docker-compose.dev.yml down -v
  ```
  Cleans up the Docker environment, removing containers and volumes.

### Database and Migration Commands

- Connect to the development database:
  ```
  psql -h localhost -p 5432 -U postgres -d postgres
  ```
  Provides quick access to the PostgreSQL database for querying and management.

- Run database migrations:
  ```
  alembic upgrade head
  ```
  Applies all pending database migrations to keep your schema up-to-date.

### Code Quality Commands

- Format web code:
  ```
  npx prettier --write web
  ```
  Ensures consistent styling in the web codebase using Prettier.

- Format Python and web code:
  ```
  black .; npx prettier --write web
  ```
  Runs both Black for Python formatting and Prettier for web code formatting.

- Run linting and import sorting:
  ```
  mypy .; ruff .; find ./backend/danswer -name '*.py' | xargs reorder-python-imports --py311-plus
  ```
  Performs type checking, linting, and import sorting to maintain code quality.

## Code Quality and Pull Request Checks

At Danswer, we maintain high code quality standards through automated checks in our development process. These checks are crucial for maintaining consistency and preventing issues in our codebase.

### Formatting and Linting

We use a combination of tools to ensure our code is properly formatted and follows our coding standards:

1. Black: For Python code formatting
2. Prettier: For web code formatting
3. mypy: For Python type checking
4. ruff: For Python linting
5. reorder-python-imports: For consistent import ordering in Python files

These tools are run as part of our pre-commit hooks and GitHub Actions workflows. To ensure your code passes these checks, run the following command before committing:

```
mypy .; ruff .; find ./backend/danswer -name '*.py' | xargs reorder-python-imports --py311-plus
```

This command runs our full suite of linting and formatting checks. It's the same check that our GitHub Actions workflow performs on pull requests.

### Pull Request Checks

When you submit a pull request, our GitHub Actions workflow automatically runs these checks on your code. Your pull request will not be approved until it passes all these checks. This ensures that all code merged into our main branch meets our quality standards.

To avoid delays in the PR process, we recommend running these checks locally before pushing your code. This way, you can catch and fix any issues early in your development process.

## Setting Up Aliases

To make these commands easier to use, you can set up aliases in your shell configuration. Here are instructions for common operating systems:

### macOS and Linux (Zsh)

1. Open your `.zshrc` file:
   ```
   nano ~/.zshrc
   ```

2. Add the following at the end of the file:

   ```zsh
   # Danswer Development Aliases
   alias danswer_api="AUTH_TYPE=disabled uvicorn danswer.main:app --reload --port 8080"
   alias danswer_bg_jobs="python ./scripts/dev_run_background_jobs.py"
   alias danswer_model_server="uvicorn model_server.main:app --reload --port 9000"
   alias danswer_docker_full="docker compose -f ./deployment/docker_compose/docker-compose.dev.yml -p danswer-stack up -d --build --force-recreate"
   alias danswer_docker_core="docker compose -f ./deployment/docker_compose/docker-compose.dev.yml -p danswer-stack up -d index relational_db"
   alias danswer_docker_cleanup="docker compose -f ./deployment/docker_compose/docker-compose.dev.yml down -v"
   alias danswer_db_connect="psql -h localhost -p 5432 -U postgres -d postgres"
   alias danswer_db_migrate="alembic upgrade head"
   alias danswer_format_web="npx prettier --write web"
   alias danswer_format_all="black .; npx prettier --write web"
   alias danswer_lint="mypy .; ruff .; find ./backend/danswer -name '*.py' | xargs reorder-python-imports --py311-plus"
   ```

3. Save the file and run:
   ```
   source ~/.zshrc
   ```

### Windows (PowerShell)

1. Open your PowerShell profile:
   ```
   notepad $PROFILE
   ```

2. Add the following to the file:

   ```powershell
   # Danswer Development Aliases
   function danswer_api { AUTH_TYPE=disabled uvicorn danswer.main:app --reload --port 8080 }
   function danswer_bg_jobs { python ./scripts/dev_run_background_jobs.py }
   function danswer_model_server { uvicorn model_server.main:app --reload --port 9000 }
   function danswer_docker_full { docker compose -f ./deployment/docker_compose/docker-compose.dev.yml -p danswer-stack up -d --build --force-recreate }
   function danswer_docker_core { docker compose -f ./deployment/docker_compose/docker-compose.dev.yml -p danswer-stack up -d index relational_db }
   function danswer_docker_cleanup { docker compose -f ./deployment/docker_compose/docker-compose.dev.yml down -v }
   function danswer_db_connect { psql -h localhost -p 5432 -U postgres -d postgres }
   function danswer_db_migrate { alembic upgrade head }
   function danswer_format_web { npx prettier --write web }
   function danswer_format_all { black .; npx prettier --write web }
   function danswer_lint { mypy .; ruff .; Get-ChildItem -Recurse -Filter *.py | ForEach-Object { reorder-python-imports --py311-plus $_.FullName } }
   ```

3. Save the file and restart PowerShell or run:
   ```
   . $PROFILE
   ```

These aliases will allow you to use shorter commands for common Danswer development tasks, making your workflow more efficient. Remember to run the linting and formatting checks before submitting your pull requests to ensure smooth integration of your contributions.
